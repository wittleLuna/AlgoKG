# 节点详情增强测试指南

## 测试目标

验证嵌入图谱中节点详情显示的丰富信息功能是否正常工作。

## 测试步骤

### 1. 基础功能测试

#### 步骤1：启动系统
```bash
# 启动后端
cd web_app/backend
python -m uvicorn app.main:app --reload --host 0.0.0.0 --port 8000

# 启动前端
cd web_app/frontend
npm start
```

#### 步骤2：提问测试
在聊天界面输入包含明确实体的问题，例如：
- "完全平方数这道题怎么解？"
- "动态规划算法的特点是什么？"
- "数组这种数据结构有什么特点？"

#### 步骤3：观察图谱加载
- 查看是否显示"正在加载增强图谱数据..."
- 确认图谱显示后有"增强数据"标签
- 验证图谱节点数量比原来更多

#### 步骤4：点击节点测试
点击图谱中的不同类型节点，验证详情显示：

**题目节点（Problem）**：
- 基本信息：标题、类型、描述、难度、平台、分类
- 相关算法：算法列表及描述
- 数据结构：数据结构列表及描述
- 复杂度分析：时间复杂度、空间复杂度
- 相关题目：相似题目列表
- 解决方案：多种解法（如果有）
- 关键洞察：重要知识点（如果有）

**算法节点（Algorithm）**：
- 基本信息：名称、类型、描述、分类
- 相关题目：使用该算法的题目
- 复杂度分析：时间复杂度、空间复杂度
- 优缺点分析：算法的优势和劣势（如果有）

**数据结构节点（DataStructure）**：
- 基本信息：名称、类型、描述、分类
- 相关题目：使用该数据结构的题目
- 操作复杂度：访问、搜索、插入、删除复杂度
- 优缺点分析：数据结构的优势和劣势（如果有）

### 2. 数据完整性测试

#### 验证数据源
1. 对比嵌入图谱和独立图谱页面的节点信息
2. 确认两者显示的相关节点一致
3. 验证节点详情信息的完整性

#### API调用验证
打开浏览器开发者工具，检查网络请求：
1. 确认调用了 `/api/v1/graph/unified/query` API
2. 验证节点详情调用了 `/api/v1/graph/unified/node/{node_id}/details` API
3. 检查API响应数据的格式和内容

### 3. 错误处理测试

#### 网络错误测试
1. 断开网络连接
2. 点击节点查看是否正确显示错误信息
3. 恢复网络后验证功能恢复

#### 数据缺失测试
1. 点击没有详细信息的节点
2. 验证是否显示"暂无详细信息"
3. 确认不会出现JavaScript错误

### 4. 性能测试

#### 加载性能
1. 测量图谱数据加载时间
2. 观察节点详情获取速度
3. 检查是否有重复的API请求

#### 内存使用
1. 打开浏览器性能监控
2. 多次点击不同节点
3. 观察内存使用情况

### 5. 用户体验测试

#### 视觉效果
1. 验证"增强数据"标签显示
2. 检查加载状态指示器
3. 确认详情抽屉的布局和样式

#### 交互体验
1. 测试节点点击响应速度
2. 验证详情抽屉的打开/关闭
3. 检查滚动和布局适配

## 预期结果

### 成功标准
- ✅ 图谱显示"增强数据"标签
- ✅ 节点详情包含丰富信息
- ✅ 不同类型节点显示对应的详情结构
- ✅ API调用正常，数据格式正确
- ✅ 错误情况有适当的处理和提示
- ✅ 性能表现良好，无明显延迟
- ✅ 用户界面美观，交互流畅

### 常见问题排查

#### 问题1：图谱不显示"增强数据"标签
**可能原因**：
- 后端API不可用
- 实体识别失败
- 网络连接问题

**排查步骤**：
1. 检查浏览器控制台错误
2. 验证后端服务是否运行
3. 确认问题中包含明确的实体

#### 问题2：节点详情信息简单
**可能原因**：
- 统一图谱服务未正确格式化数据
- Neo4j数据库中缺少详细信息
- API响应格式不匹配

**排查步骤**：
1. 检查API响应数据结构
2. 验证Neo4j数据库连接
3. 查看后端日志

#### 问题3：点击节点无响应
**可能原因**：
- 节点ID格式不正确
- API端点配置错误
- 前端事件处理问题

**排查步骤**：
1. 检查节点ID和类型
2. 验证API端点配置
3. 查看浏览器控制台错误

## 测试数据建议

### 推荐测试实体
1. **题目**：
   - "两数之和"
   - "完全平方数"
   - "最长公共子序列"

2. **算法**：
   - "动态规划"
   - "深度优先搜索"
   - "二分查找"

3. **数据结构**：
   - "数组"
   - "链表"
   - "二叉树"

### 测试问题示例
- "两数之和这道题用什么算法解决？"
- "动态规划算法的时间复杂度是多少？"
- "数组和链表有什么区别？"
- "如何用深度优先搜索遍历二叉树？"

## 报告问题

如果发现问题，请记录以下信息：
1. 具体的测试步骤
2. 预期结果和实际结果
3. 浏览器控制台错误信息
4. 网络请求和响应数据
5. 系统环境信息（浏览器版本、操作系统等）

## 总结

通过这个测试指南，可以全面验证节点详情增强功能的正确性和稳定性。重点关注数据的完整性、API的正确调用、错误处理的健壮性以及用户体验的流畅性。
