{"ast":null,"code":"import React,{useState,useCallback}from'react';import{Row,Col,Card,Input,Button,Space,Typography,Divider,Tag,message,Tabs}from'antd';import{CodeOutlined,BulbOutlined,UserOutlined}from'@ant-design/icons';import AlgorithmVisualizer from'../components/visualization/AlgorithmVisualizer';import DataVisualization from'../components/visualization/DataVisualization';import CustomAlgorithmEditor from'../components/visualization/CustomAlgorithmEditor';import UniversalDataVisualization from'../components/visualization/UniversalDataVisualization';import SavedAlgorithmsManager from'../components/visualization/SavedAlgorithmsManager';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const{Title,Paragraph,Text}=Typography;const{TextArea}=Input;const{TabPane}=Tabs;const AlgorithmVisualizationPage=()=>{const[currentStep,setCurrentStep]=useState();const[inputData,setInputData]=useState('64,34,25,12,22,11,90');const[parsedData,setParsedData]=useState([64,34,25,12,22,11,90]);const[selectedAlgorithm,setSelectedAlgorithm]=useState('bubble_sort');// 自定义算法状态\nconst[customSteps,setCustomSteps]=useState([]);const[customCurrentStep,setCustomCurrentStep]=useState(0);const[customDataStructure,setCustomDataStructure]=useState('array');const[isCustomExecuting,setIsCustomExecuting]=useState(false);// 算法信息\nconst algorithmInfo={bubble_sort:{name:'冒泡排序',description:'冒泡排序是一种简单的排序算法。它重复地遍历要排序的数列，一次比较两个元素，如果它们的顺序错误就把它们交换过来。',timeComplexity:'O(n²)',spaceComplexity:'O(1)',tags:['排序','比较排序','稳定排序']},quick_sort:{name:'快速排序',description:'快速排序使用分治法策略来把一个序列分为较小和较大的2个子序列，然后递归地排序两个子序列。',timeComplexity:'O(n log n)',spaceComplexity:'O(log n)',tags:['排序','分治算法','不稳定排序']},binary_search:{name:'二分查找',description:'二分查找是一种在有序数组中查找某一特定元素的搜索算法。搜索过程从数组的中间元素开始。',timeComplexity:'O(log n)',spaceComplexity:'O(1)',tags:['搜索','分治算法','有序数组']}};const handleStepChange=useCallback(step=>{setCurrentStep(step);},[]);const handleDataChange=useCallback(()=>{try{const data=inputData.split(',').map(s=>parseInt(s.trim())).filter(n=>!isNaN(n));if(data.length===0){message.error('请输入有效的数字数据');return;}setParsedData(data);message.success('数据更新成功');}catch(error){message.error('数据格式错误，请输入逗号分隔的数字');}},[inputData]);// 处理自定义算法执行\nconst handleCustomAlgorithmExecute=useCallback(async(code,dataStructure,inputData)=>{setIsCustomExecuting(true);setCustomDataStructure(dataStructure);try{// 创建安全的执行环境\nconst func=new Function('data',`\n        ${code}\n\n        // 尝试调用不同的函数名\n        if (typeof customAlgorithm !== 'undefined') {\n          return customAlgorithm(data);\n        } else if (typeof customStackAlgorithm !== 'undefined') {\n          return customStackAlgorithm(data);\n        } else if (typeof customQueueAlgorithm !== 'undefined') {\n          return customQueueAlgorithm(data);\n        } else if (typeof customTreeAlgorithm !== 'undefined') {\n          return customTreeAlgorithm(data);\n        } else if (typeof customGraphAlgorithm !== 'undefined') {\n          return customGraphAlgorithm(data);\n        }\n\n        return [];\n      `);const result=func(inputData);if(Array.isArray(result)&&result.length>0){setCustomSteps(result);setCustomCurrentStep(0);message.success('自定义算法执行成功！');}else{message.warning('算法执行完成，但没有返回可视化步骤');setCustomSteps([]);}}catch(error){console.error('自定义算法执行错误:',error);message.error('算法执行出错，请检查代码语法');setCustomSteps([]);}finally{setIsCustomExecuting(false);}},[]);// 加载保存的算法\nconst handleLoadSavedAlgorithm=useCallback(algorithm=>{// 这里可以将算法加载到自定义编辑器中\nmessage.success(`已加载算法: ${algorithm.name}`);},[]);const currentAlgorithmInfo=algorithmInfo[selectedAlgorithm];return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'24px',minHeight:'calc(100vh - 120px)',height:'calc(100vh - 120px)',overflow:'auto'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:24},children:[/*#__PURE__*/_jsxs(Title,{level:2,children:[/*#__PURE__*/_jsx(CodeOutlined,{style:{marginRight:8}}),\"\\u7B97\\u6CD5\\u53EF\\u89C6\\u5316\\u5B9E\\u9A8C\\u5BA4\"]}),/*#__PURE__*/_jsx(Paragraph,{children:\"\\u901A\\u8FC7\\u5B9E\\u65F6\\u4EE3\\u7801\\u6267\\u884C\\u548C\\u52A8\\u753B\\u53EF\\u89C6\\u5316\\uFF0C\\u6DF1\\u5165\\u7406\\u89E3\\u7B97\\u6CD5\\u7684\\u5DE5\\u4F5C\\u539F\\u7406\\u3002 \\u7F16\\u5199\\u4EE3\\u7801\\uFF0C\\u89C2\\u5BDF\\u7B97\\u6CD5\\u6267\\u884C\\u8FC7\\u7A0B\\uFF0C\\u638C\\u63E1\\u7B97\\u6CD5\\u7CBE\\u9AD3\\u3002\"})]}),/*#__PURE__*/_jsxs(Tabs,{defaultActiveKey:\"editor\",size:\"large\",style:{height:'calc(100vh - 200px)'},tabBarStyle:{marginBottom:16},children:[/*#__PURE__*/_jsx(TabPane,{tab:/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(CodeOutlined,{}),\"\\u4EE3\\u7801\\u7F16\\u8F91\\u5668\"]}),children:/*#__PURE__*/_jsxs(\"div\",{style:{height:'calc(100vh - 280px)',overflow:'auto',paddingRight:'8px'},children:[/*#__PURE__*/_jsxs(Row,{gutter:[24,24],style:{minHeight:0,flex:1},children:[/*#__PURE__*/_jsx(Col,{span:8,children:/*#__PURE__*/_jsxs(Space,{direction:\"vertical\",style:{width:'100%'},size:\"large\",children:[/*#__PURE__*/_jsxs(Card,{title:/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(BulbOutlined,{}),\"\\u7B97\\u6CD5\\u4FE1\\u606F\"]}),size:\"small\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:16},children:[/*#__PURE__*/_jsx(Title,{level:4,style:{margin:0},children:currentAlgorithmInfo===null||currentAlgorithmInfo===void 0?void 0:currentAlgorithmInfo.name}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:8},children:currentAlgorithmInfo===null||currentAlgorithmInfo===void 0?void 0:currentAlgorithmInfo.tags.map(tag=>/*#__PURE__*/_jsx(Tag,{color:\"blue\",style:{marginBottom:4},children:tag},tag))})]}),/*#__PURE__*/_jsx(Paragraph,{style:{fontSize:'14px',lineHeight:1.6},children:currentAlgorithmInfo===null||currentAlgorithmInfo===void 0?void 0:currentAlgorithmInfo.description}),/*#__PURE__*/_jsx(Divider,{style:{margin:'12px 0'}}),/*#__PURE__*/_jsxs(Row,{gutter:16,children:[/*#__PURE__*/_jsxs(Col,{span:12,children:[/*#__PURE__*/_jsx(Text,{strong:true,children:\"\\u65F6\\u95F4\\u590D\\u6742\\u5EA6:\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Text,{code:true,children:currentAlgorithmInfo===null||currentAlgorithmInfo===void 0?void 0:currentAlgorithmInfo.timeComplexity})]}),/*#__PURE__*/_jsxs(Col,{span:12,children:[/*#__PURE__*/_jsx(Text,{strong:true,children:\"\\u7A7A\\u95F4\\u590D\\u6742\\u5EA6:\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Text,{code:true,children:currentAlgorithmInfo===null||currentAlgorithmInfo===void 0?void 0:currentAlgorithmInfo.spaceComplexity})]})]})]}),/*#__PURE__*/_jsx(Card,{title:\"\\u8F93\\u5165\\u6570\\u636E\",size:\"small\",children:/*#__PURE__*/_jsxs(Space,{direction:\"vertical\",style:{width:'100%'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Text,{children:\"\\u6570\\u636E\\u6570\\u7EC4 (\\u9017\\u53F7\\u5206\\u9694):\"}),/*#__PURE__*/_jsx(Input,{value:inputData,onChange:e=>setInputData(e.target.value),placeholder:\"\\u4F8B\\u5982: 64,34,25,12,22,11,90\",style:{marginTop:8}})]}),/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:handleDataChange,style:{width:'100%'},children:\"\\u66F4\\u65B0\\u6570\\u636E\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Text,{type:\"secondary\",children:\"\\u5F53\\u524D\\u6570\\u636E:\"}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:4},children:parsedData.map((num,index)=>/*#__PURE__*/_jsx(Tag,{style:{margin:'2px'},children:num},index))})]})]})}),currentStep&&/*#__PURE__*/_jsx(Card,{title:\"\\u5F53\\u524D\\u6B65\\u9AA4\",size:\"small\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Text,{strong:true,children:[\"\\u6B65\\u9AA4 \",currentStep.id+1,\":\"]}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:8},children:/*#__PURE__*/_jsx(Text,{children:currentStep.description})}),currentStep.message&&/*#__PURE__*/_jsx(\"div\",{style:{marginTop:8,padding:8,backgroundColor:'#f6ffed',borderRadius:4},children:/*#__PURE__*/_jsx(Text,{type:\"success\",children:currentStep.message})}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:12},children:[/*#__PURE__*/_jsx(Text,{type:\"secondary\",children:\"\\u6570\\u636E\\u72B6\\u6001:\"}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:4},children:currentStep.data.map((num,index)=>/*#__PURE__*/_jsx(Tag,{color:currentStep.highlights.includes(index)?currentStep.comparisons.includes(index)?'red':'green':currentStep.swaps&&(currentStep.swaps[0]===index||currentStep.swaps[1]===index)?'orange':'default',style:{margin:'2px'},children:num},index))})]})]})})]})}),/*#__PURE__*/_jsx(Col,{span:16,children:/*#__PURE__*/_jsxs(\"div\",{style:{height:'100%',display:'flex',flexDirection:'column',gap:'16px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{flex:'0 0 auto'},children:/*#__PURE__*/_jsx(AlgorithmVisualizer,{algorithm:selectedAlgorithm,data:parsedData,onStepChange:handleStepChange})}),/*#__PURE__*/_jsx(\"div\",{style:{flex:'1 1 auto',minHeight:'350px'},children:/*#__PURE__*/_jsx(DataVisualization,{step:currentStep,width:700,height:300,type:\"array\"})})]})})]}),/*#__PURE__*/_jsx(Card,{title:\"\\u4F7F\\u7528\\u8BF4\\u660E\",style:{marginTop:24},size:\"small\",children:/*#__PURE__*/_jsxs(Row,{gutter:24,children:[/*#__PURE__*/_jsx(Col,{span:8,children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Title,{level:5,children:\"1. \\u9009\\u62E9\\u7B97\\u6CD5\"}),/*#__PURE__*/_jsx(Paragraph,{children:\"\\u4ECE\\u4E0B\\u62C9\\u83DC\\u5355\\u4E2D\\u9009\\u62E9\\u8981\\u53EF\\u89C6\\u5316\\u7684\\u7B97\\u6CD5\\uFF0C\\u7CFB\\u7EDF\\u4F1A\\u81EA\\u52A8\\u52A0\\u8F7D\\u5BF9\\u5E94\\u7684\\u4EE3\\u7801\\u6A21\\u677F\\u3002\"})]})}),/*#__PURE__*/_jsx(Col,{span:8,children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Title,{level:5,children:\"2. \\u7F16\\u8F91\\u4EE3\\u7801\"}),/*#__PURE__*/_jsx(Paragraph,{children:\"\\u5728\\u4EE3\\u7801\\u7F16\\u8F91\\u5668\\u4E2D\\u4FEE\\u6539\\u7B97\\u6CD5\\u5B9E\\u73B0\\uFF0C\\u652F\\u6301JavaScript\\u8BED\\u6CD5\\u9AD8\\u4EAE\\u548C\\u81EA\\u52A8\\u8865\\u5168\\u3002\"})]})}),/*#__PURE__*/_jsx(Col,{span:8,children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Title,{level:5,children:\"3. \\u6267\\u884C\\u53EF\\u89C6\\u5316\"}),/*#__PURE__*/_jsx(Paragraph,{children:\"\\u70B9\\u51FB\\u6267\\u884C\\u6309\\u94AE\\u8FD0\\u884C\\u7B97\\u6CD5\\uFF0C\\u89C2\\u5BDF\\u5B9E\\u65F6\\u7684\\u52A8\\u753B\\u53EF\\u89C6\\u5316\\u6548\\u679C\\u548C\\u6B65\\u9AA4\\u8BF4\\u660E\\u3002\"})]})})]})})]})},\"editor\"),/*#__PURE__*/_jsx(TabPane,{tab:/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(UserOutlined,{}),\"\\u81EA\\u5B9A\\u4E49\\u7B97\\u6CD5\"]}),children:/*#__PURE__*/_jsx(\"div\",{style:{height:'calc(100vh - 280px)',overflow:'auto',paddingRight:'8px'},children:/*#__PURE__*/_jsxs(Row,{gutter:[24,24],children:[/*#__PURE__*/_jsxs(Col,{span:16,children:[/*#__PURE__*/_jsx(CustomAlgorithmEditor,{onExecute:handleCustomAlgorithmExecute,isExecuting:isCustomExecuting}),customSteps.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:24},children:[/*#__PURE__*/_jsx(UniversalDataVisualization,{step:customSteps[customCurrentStep]||customSteps[0],dataStructure:customDataStructure,width:700,height:400}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:16,textAlign:'center'},children:/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(Button,{disabled:customCurrentStep===0,onClick:()=>setCustomCurrentStep(Math.max(0,customCurrentStep-1)),children:\"\\u4E0A\\u4E00\\u6B65\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u6B65\\u9AA4 \",customCurrentStep+1,\" / \",customSteps.length]}),/*#__PURE__*/_jsx(Button,{disabled:customCurrentStep===customSteps.length-1,onClick:()=>setCustomCurrentStep(Math.min(customSteps.length-1,customCurrentStep+1)),children:\"\\u4E0B\\u4E00\\u6B65\"})]})})]})]}),/*#__PURE__*/_jsx(Col,{span:8,children:/*#__PURE__*/_jsx(SavedAlgorithmsManager,{onLoadAlgorithm:handleLoadSavedAlgorithm})})]})})},\"custom\")]})]});};export default AlgorithmVisualizationPage;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}