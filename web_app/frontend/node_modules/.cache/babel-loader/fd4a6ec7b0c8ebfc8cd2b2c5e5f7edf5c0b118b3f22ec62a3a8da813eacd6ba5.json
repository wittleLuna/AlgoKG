{"ast":null,"code":"import React,{useState}from'react';import{Card,Typography,Tag,Space,Progress,Tooltip,Row,Col,Button,Collapse}from'antd';import'./EnhancedSimilarProblems.css';import{TrophyOutlined,ThunderboltOutlined,BulbOutlined,StarOutlined,LikeOutlined,EyeOutlined,ExpandAltOutlined}from'@ant-design/icons';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const{Title,Text,Paragraph}=Typography;const{Panel}=Collapse;const EnhancedSimilarProblems=_ref=>{let{problems,onProblemClick,maxDisplay=6}=_ref;const[showAll,setShowAll]=useState(false);const[viewMode,setViewMode]=useState('grid');// 获取推荐强度图标和颜色\nconst getRecommendationLevel=score=>{if(score>=0.8)return{icon:/*#__PURE__*/_jsx(TrophyOutlined,{}),color:'#f5222d',level:'强烈推荐',bgColor:'#fff2f0'};if(score>=0.6)return{icon:/*#__PURE__*/_jsx(LikeOutlined,{}),color:'#fa8c16',level:'推荐',bgColor:'#fff7e6'};if(score>=0.4)return{icon:/*#__PURE__*/_jsx(BulbOutlined,{}),color:'#1890ff',level:'建议',bgColor:'#f0f9ff'};return{icon:/*#__PURE__*/_jsx(StarOutlined,{}),color:'#52c41a',level:'可选',bgColor:'#f6ffed'};};// 获取难度颜色\nconst getDifficultyColor=difficulty=>{switch(difficulty){case'简单':return'green';case'中等':return'orange';case'困难':return'red';default:return'default';}};// 渲染网格模式的题目卡片\nconst renderGridCard=(problem,index)=>{var _problem$complete_inf,_problem$complete_inf2;const recommendation=getRecommendationLevel(problem.hybrid_score);return/*#__PURE__*/_jsx(Col,{xs:24,sm:12,lg:8,children:/*#__PURE__*/_jsxs(Card,{hoverable:true,className:\"similar-problem-grid-card\",onClick:()=>onProblemClick(problem.title),style:{height:'100%',borderRadius:'12px',border:`2px solid ${recommendation.color}20`,background:`linear-gradient(135deg, ${recommendation.bgColor} 0%, white 100%)`,transition:'all 0.3s ease',cursor:'pointer'},bodyStyle:{padding:'16px',height:'100%',display:'flex',flexDirection:'column'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'12px'},children:[/*#__PURE__*/_jsx(Tag,{color:recommendation.color,style:{fontSize:'10px',padding:'2px 6px',borderRadius:'9px',border:'none'},children:recommendation.level}),/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'right'},children:[/*#__PURE__*/_jsx(Text,{type:\"secondary\",style:{fontSize:'12px'},children:\"\\u76F8\\u4F3C\\u5EA6\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Text,{strong:true,style:{color:recommendation.color,fontSize:'14px'},children:[(problem.hybrid_score*100).toFixed(0),\"%\"]})]})]}),/*#__PURE__*/_jsxs(Title,{level:5,style:{margin:'0 0 8px 0',color:'#1890ff',fontSize:'14px',lineHeight:'1.4',flex:'0 0 auto'},children:[recommendation.icon,/*#__PURE__*/_jsx(\"span\",{style:{marginLeft:'6px'},children:problem.title})]}),/*#__PURE__*/_jsx(Paragraph,{ellipsis:{rows:2},style:{fontSize:'12px',color:'#666',margin:'0 0 12px 0',flex:'1 1 auto'},children:problem.recommendation_reason}),/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:'8px',flex:'0 0 auto'},children:/*#__PURE__*/_jsxs(Space,{size:[4,4],wrap:true,children:[problem.shared_tags.slice(0,3).map(tag=>/*#__PURE__*/_jsx(Tag,{size:\"small\",color:\"blue\",style:{fontSize:'10px',margin:'1px'},children:tag},tag)),problem.shared_tags.length>3&&/*#__PURE__*/_jsxs(Tag,{size:\"small\",color:\"default\",style:{fontSize:'10px'},children:[\"+\",problem.shared_tags.length-3]})]})}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',flex:'0 0 auto'},children:[((_problem$complete_inf=problem.complete_info)===null||_problem$complete_inf===void 0?void 0:_problem$complete_inf.difficulty)&&/*#__PURE__*/_jsx(Tag,{color:getDifficultyColor(problem.complete_info.difficulty),size:\"small\",children:problem.complete_info.difficulty}),((_problem$complete_inf2=problem.complete_info)===null||_problem$complete_inf2===void 0?void 0:_problem$complete_inf2.platform)&&/*#__PURE__*/_jsx(Tag,{color:\"purple\",size:\"small\",children:problem.complete_info.platform})]})]})},index);};// 渲染列表模式的题目卡片\nconst renderListCard=(problem,index)=>{var _problem$complete_inf3,_problem$complete_inf4;const recommendation=getRecommendationLevel(problem.hybrid_score);return/*#__PURE__*/_jsx(Card,{hoverable:true,className:\"similar-problem-list-card\",onClick:()=>onProblemClick(problem.title),style:{marginBottom:'12px',borderRadius:'8px',border:`1px solid ${recommendation.color}30`,borderLeft:`4px solid ${recommendation.color}`,cursor:'pointer',transition:'all 0.3s ease'},bodyStyle:{padding:'16px'},children:/*#__PURE__*/_jsxs(Row,{gutter:16,align:\"middle\",children:[/*#__PURE__*/_jsx(Col,{flex:\"auto\",children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'12px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:'40px',height:'40px',borderRadius:'20px',background:recommendation.bgColor,display:'flex',alignItems:'center',justifyContent:'center',color:recommendation.color,fontSize:'16px'},children:recommendation.icon}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsx(Title,{level:5,style:{margin:'0 0 4px 0',color:'#1890ff'},children:problem.title}),/*#__PURE__*/_jsx(Text,{type:\"secondary\",style:{fontSize:'12px'},children:problem.recommendation_reason})]})]})}),/*#__PURE__*/_jsx(Col,{flex:\"120px\",children:/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center'},children:[/*#__PURE__*/_jsx(Text,{type:\"secondary\",style:{fontSize:'12px'},children:\"\\u76F8\\u4F3C\\u5EA6\"}),/*#__PURE__*/_jsx(Progress,{percent:problem.hybrid_score*100,size:\"small\",strokeColor:recommendation.color,showInfo:false,style:{margin:'4px 0'}}),/*#__PURE__*/_jsxs(Text,{strong:true,style:{color:recommendation.color,fontSize:'12px'},children:[(problem.hybrid_score*100).toFixed(0),\"%\"]})]})}),/*#__PURE__*/_jsx(Col,{flex:\"200px\",children:/*#__PURE__*/_jsxs(Space,{direction:\"vertical\",size:\"small\",style:{width:'100%'},children:[/*#__PURE__*/_jsxs(Space,{size:[4,4],wrap:true,children:[problem.shared_tags.slice(0,2).map(tag=>/*#__PURE__*/_jsx(Tag,{size:\"small\",color:\"blue\",children:tag},tag)),problem.shared_tags.length>2&&/*#__PURE__*/_jsxs(Tag,{size:\"small\",color:\"default\",children:[\"+\",problem.shared_tags.length-2]})]}),/*#__PURE__*/_jsxs(Space,{children:[((_problem$complete_inf3=problem.complete_info)===null||_problem$complete_inf3===void 0?void 0:_problem$complete_inf3.difficulty)&&/*#__PURE__*/_jsx(Tag,{color:getDifficultyColor(problem.complete_info.difficulty),size:\"small\",children:problem.complete_info.difficulty}),((_problem$complete_inf4=problem.complete_info)===null||_problem$complete_inf4===void 0?void 0:_problem$complete_inf4.platform)&&/*#__PURE__*/_jsx(Tag,{color:\"purple\",size:\"small\",children:problem.complete_info.platform})]})]})})]})},index);};const displayedProblems=showAll?problems:problems.slice(0,maxDisplay);const hasMore=problems.length>maxDisplay;return/*#__PURE__*/_jsxs(\"div\",{className:\"enhanced-similar-problems\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'16px',padding:'12px 16px',background:'#fafafa',borderRadius:'8px'},children:[/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(ThunderboltOutlined,{style:{color:'#1890ff'}}),/*#__PURE__*/_jsx(Text,{strong:true,children:\"\\u76F8\\u4F3C\\u9898\\u76EE\\u63A8\\u8350\"}),/*#__PURE__*/_jsxs(Tag,{color:\"blue\",style:{fontSize:'10px'},children:[problems.length,\"\\u9053\"]})]}),/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(Tooltip,{title:viewMode==='grid'?'切换到列表视图':'切换到网格视图',children:/*#__PURE__*/_jsx(Button,{type:\"text\",size:\"small\",icon:viewMode==='grid'?/*#__PURE__*/_jsx(EyeOutlined,{}):/*#__PURE__*/_jsx(ExpandAltOutlined,{}),onClick:()=>setViewMode(viewMode==='grid'?'list':'grid')})}),hasMore&&/*#__PURE__*/_jsx(Button,{type:\"link\",size:\"small\",onClick:()=>setShowAll(!showAll),children:showAll?'收起':`查看全部 ${problems.length} 道`})]})]}),viewMode==='grid'?/*#__PURE__*/_jsx(Row,{gutter:[16,16],children:displayedProblems.map((problem,index)=>renderGridCard(problem,index))}):/*#__PURE__*/_jsx(\"div\",{children:displayedProblems.map((problem,index)=>renderListCard(problem,index))}),problems.length>0&&/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'16px',padding:'12px',background:'#f0f9ff',borderRadius:'6px',textAlign:'center'},children:/*#__PURE__*/_jsxs(Text,{type:\"secondary\",style:{fontSize:'12px'},children:[/*#__PURE__*/_jsx(ThunderboltOutlined,{style:{marginRight:'4px'}}),\"\\u57FA\\u4E8E\\u7B97\\u6CD5\\u6807\\u7B7E\\u3001\\u96BE\\u5EA6\\u7B49\\u7EA7\\u548C\\u5B66\\u4E60\\u8DEF\\u5F84\\u667A\\u80FD\\u63A8\\u8350\"]})})]});};export default EnhancedSimilarProblems;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}